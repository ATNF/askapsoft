/* This file was generated by ODB, object-relational mapping (ORM)
 * compiler for C++.
 */

DROP TABLE IF EXISTS "ContinuumComponent";

CREATE TABLE IF NOT EXISTS "schema_version" (
  "name" TEXT NOT NULL PRIMARY KEY,
  "version" INTEGER NOT NULL,
  "migration" INTEGER NOT NULL);

DELETE FROM "schema_version"
  WHERE "name" = '';

CREATE TABLE "ContinuumComponent" (
  "version" INTEGER NOT NULL,
  "continuum_component_id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  "observation_date" TEXT NULL,
  "healpix_index" INTEGER NOT NULL,
  "sb_id" INTEGER NULL,
  "component_id" TEXT NULL,
  "ra" REAL NOT NULL,
  "dec" REAL NOT NULL,
  "ra_err" REAL NOT NULL,
  "dec_err" REAL NOT NULL,
  "freq" REAL NOT NULL,
  "flux_peak" REAL NOT NULL,
  "flux_peak_err" REAL NOT NULL,
  "flux_int" REAL NOT NULL,
  "flux_int_err" REAL NOT NULL,
  "maj_axis" REAL NOT NULL,
  "min_axis" REAL NOT NULL,
  "pos_ang" REAL NOT NULL,
  "maj_axis_err" REAL NOT NULL,
  "min_axis_err" REAL NOT NULL,
  "pos_ang_err" REAL NOT NULL,
  "maj_axis_deconv" REAL NOT NULL,
  "min_axis_deconv" REAL NOT NULL,
  "pos_ang_deconv" REAL NOT NULL,
  "chi_squared_fit" REAL NOT NULL,
  "rms_fit_Gauss" REAL NOT NULL,
  "spectral_index" REAL NOT NULL,
  "spectral_curvature" REAL NOT NULL,
  "rms_image" REAL NOT NULL,
  "has_siblings" INT NOT NULL,
  "fit_is_estimate" INT NOT NULL,
  "polarisation_component_id" INTEGER NULL,
  "data_source_id" INTEGER NULL,
  CONSTRAINT "polarisation_component_id_fk"
    FOREIGN KEY ("polarisation_component_id")
    REFERENCES "Polarisation" ("polarisation_component_id")
    DEFERRABLE INITIALLY DEFERRED,
  CONSTRAINT "data_source_id_fk"
    FOREIGN KEY ("data_source_id")
    REFERENCES "DataSource" ("data_source_id")
    DEFERRABLE INITIALLY DEFERRED);

CREATE INDEX "ContinuumComponent_continuum_component_id_i"
  ON "ContinuumComponent" ("continuum_component_id");

CREATE INDEX "ContinuumComponent_observation_date_i"
  ON "ContinuumComponent" ("observation_date");

CREATE INDEX "ContinuumComponent_healpix_index_i"
  ON "ContinuumComponent" ("healpix_index");

CREATE INDEX "ContinuumComponent_sb_id_i"
  ON "ContinuumComponent" ("sb_id");

INSERT OR IGNORE INTO "schema_version" (
  "name", "version", "migration")
  VALUES ('', 1, 0);

